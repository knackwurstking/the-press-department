(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerpolicy&&(r.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?r.credentials="include":i.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();function g(){}function G(e){return e()}function B(){return Object.create(null)}function w(e){e.forEach(G)}function M(e){return typeof e=="function"}function q(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function X(e){return Object.keys(e).length===0}function O(e,t){e.appendChild(t)}function L(e,t,n){e.insertBefore(t,n||null)}function b(e){e.parentNode.removeChild(e)}function p(e){return document.createElement(e)}function C(e){return document.createTextNode(e)}function H(){return C(" ")}function T(e,t,n,s){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n,s)}function f(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function S(e){return Array.from(e.childNodes)}let _;function m(e){_=e}function j(){if(!_)throw new Error("Function called outside component initialization");return _}function D(e){j().$$.on_mount.push(e)}const d=[],x=[],y=[],P=[],W=Promise.resolve();let E=!1;function Y(){E||(E=!0,W.then($))}function N(e){y.push(e)}const k=new Set;let R=0;function $(){const e=_;do{for(;R<d.length;){const t=d[R];R++,m(t),U(t.$$)}for(m(null),d.length=0,R=0;x.length;)x.pop()();for(let t=0;t<y.length;t+=1){const n=y[t];k.has(n)||(k.add(n),n())}y.length=0}while(d.length);for(;P.length;)P.pop()();E=!1,k.clear(),m(e)}function U(e){if(e.fragment!==null){e.update(),w(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(N)}}const K=new Set;function J(e,t){e&&e.i&&(K.delete(e),e.i(t))}function Q(e,t,n,s){const{fragment:i,on_mount:r,on_destroy:o,after_update:c}=e.$$;i&&i.m(t,n),s||N(()=>{const a=r.map(G).filter(M);o?o.push(...a):w(a),e.$$.on_mount=[]}),c.forEach(N)}function V(e,t){const n=e.$$;n.fragment!==null&&(w(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Z(e,t){e.$$.dirty[0]===-1&&(d.push(e),Y(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ee(e,t,n,s,i,r,o,c=[-1]){const a=_;m(e);const l=e.$$={fragment:null,ctx:null,props:r,update:g,not_equal:i,bound:B(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(a?a.$$.context:[])),callbacks:B(),dirty:c,skip_bound:!1,root:t.target||a.$$.root};o&&o(l.root);let h=!1;if(l.ctx=n?n(e,t.props||{},(u,I,...A)=>{const v=A.length?A[0]:I;return l.ctx&&i(l.ctx[u],l.ctx[u]=v)&&(!l.skip_bound&&l.bound[u]&&l.bound[u](v),h&&Z(e,u)),I}):[],l.update(),h=!0,w(l.before_update),l.fragment=s?s(l.ctx):!1,t.target){if(t.hydrate){const u=S(t.target);l.fragment&&l.fragment.l(u),u.forEach(b)}else l.fragment&&l.fragment.c();t.intro&&J(e.$$.fragment),Q(e,t.target,t.anchor,t.customElement),$()}m(a)}class te{$destroy(){V(this,1),this.$destroy=g}$on(t,n){const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(n),()=>{const i=s.indexOf(n);i!==-1&&s.splice(i,1)}}$set(t){this.$$set&&!X(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const F=function(){const e={ROLLEN_ROUND:1,ROLLEN_GRIP:2,RIEMEN_ROUND:3,RIEMEN_GRIP:4,rbLength:1700,rbWidth:150,rbMaxCount:173,trockerLength1:150,trocknerAusgangLength:160,glRiemenCount:4};return e.assets=[{name:"rbAluBlockLeft",width:20,height:10,src:"assets/RollenBahnAluBlockLeft_20x10.png"},{name:"rbAluBlockRight",width:20,height:10,src:"assets/RollenBahnAluBlockRight_20x10.png"},{name:"rolleLeft",width:6*6,height:296,src:"assets/RolleLeft_6x296.png"},{name:"rolleRight",width:6*6,height:296,src:"assets/RolleRight_6x296.png"},{name:"rbRiemen290x5",width:290,height:5*3,src:"assets/Riemen-290x5.png"},{name:"rbRiemen270x5",width:290,height:5*3,src:"assets/Riemen-270x5.png"}],e.rb=[{name:"Trockner Eingang",engine:{count:15,type:e.ROLLEN_GRIP,side:"left"}},{name:"Ausrichter Eingang",engine:{count:14,type:e.ROLLEN_GRIP,side:"right"}},{name:"Rollen Bahn 5",engine:{count:14,type:e.ROLLEN_GRIP,side:"left"}},{name:"Rollen Bahn 4",engine:{count:22,type:e.ROLLEN_GRIP,side:"right"}},{name:"Rollen Bahn 3",engine:{count:22,type:e.ROLLEN_GRIP,side:"left"}},{name:"Rollen Bahn 2",engine:{count:22,type:e.ROLLEN_GRIP,side:"right"}},{name:"Rollen Bahn 1",engine:{count:22,type:e.ROLLEN_GRIP,side:"left"}},{name:"Wender",engine:{count:26,type:e.ROLLEN_GRIP,side:"right"}},{name:"Pressen \xDCbergangs Tisch",engine:{count:16,type:e.ROLLEN_GRIP,side:"right"}}],e.ta=[{name:"Gestell Rollen1",engine:{count:13,type:e.ROLLEN_GRIP}},{name:"Gestell Rollen 2",engine:{count:9,type:e.ROLLEN_GRIP}}],e.trockerAusgangRiemen={name:"Gestell Riemen",engine:{count:6,type:e.RIEMEN_ROUND}},e.pressenTisch={name:"Proben Tisch",engine:{count:6,type:e.RIEMEN_GRIP}},e}();class ne{constructor(t,n,s,i,r,o,c,a){this.name=t,this.assets=a,this.side=n,this.count=s,this.sX=i,this.sY=r,this.width=o,this.height=c,this._frameNumber}drawRiemen(t,n){const s=this.assets[`rbRiemen${this.count*20-10}x5`];if(s)t.drawImage(s,0,5*(this._frameNumber%3),s.width,s.height/3,n,this.side==="left"?11:this.assets.rolleLeft.height+(10-4-5),s.width,5);else throw`missing assets: "rbRiemen${this.count*10}x5"`}drawAluBlockLeft(t,n){let s=this.assets.rbAluBlockLeft;t.drawImage(s,n,0,s.width,s.height)}drawAluBlockRight(t,n){let s=this.assets.rbAluBlockRight;t.drawImage(s,n,this.assets.rbAluBlockLeft.height+(this.assets.rolleLeft.height-4),s.width,s.height)}drawRolle(t,n){let s;this.side==="left"?s=this.assets.rolleLeft:s=this.assets.rolleRight;let i=6*this._frameNumber,r=0,o=6,c=s.height,a=8,l=s.width/6,h=s.height;t.drawImage(s,i,r,o,c,n,a,l,h)}draw(t,n){let s=this._frameNumber||0;this._frameNumber=n;try{this.drawRiemen(t,this.sX+5)}catch{this._frameNumber=s}let i=-1;for(let r=0;r<this.count;r++){i+=1;let o=this.sX+i*this.assets.rbAluBlockLeft.width;this.drawAluBlockLeft(t,o),this.drawAluBlockRight(t,o),this.drawRolle(t,o+7)}}}class se{constructor(t,n,s,i,r){this.canvas=t,this.ctx=n,this.width=s,this.height=i,this.updateHz(r),this._lastFrame=0-this._fps,this._engineFrame=-1,this.assets={},this.engines,console.log("[App.svelte] canvas size (x, y):",s,i)}initialize(){this.engines=[];let t=0;for(let n of F.rb){let s=t,i=0,r=n.engine.count*this.assets.rbAluBlockLeft.width,o=this.canvas.height;t+=r,this.engines.push(new ne(n.name,n.engine.side,n.engine.count,s,i,r,o,this.assets))}}updateHz(t){this._fps=600/t}draw(t){if(t-this._lastFrame>=this._fps){this._engineFrame+=1,this._lastFrame=t,this._engineFrame>5&&(this._engineFrame=0);for(let n of this.engines)n.draw(this.ctx,this._engineFrame)}}async start(){this.initialize();const t=n=>{this.draw(n),requestAnimationFrame(t)};t(0)}}function ie(e){let t,n,s,i,r,o,c;return{c(){t=p("div"),n=p("input"),s=H(),i=p("main"),r=p("canvas"),f(n,"class","hz-rb svelte-1qbuxok"),f(n,"type","number"),f(n,"min",0),f(n,"max",25),n.value=z,f(t,"class","overlay svelte-1qbuxok"),f(r,"class","svelte-1qbuxok"),f(i,"class","svelte-1qbuxok")},m(a,l){L(a,t,l),O(t,n),L(a,s,l),L(a,i,l),O(i,r),e[3](r),o||(c=T(n,"change",e[2]),o=!0)},p:g,i:g,o:g,d(a){a&&b(t),a&&b(s),a&&b(i),e[3](null),o=!1,c()}}}let z=12;function re(e,t,n){let s,i;D(()=>{const c=s.getContext("2d");n(0,s.width=3460,s),n(0,s.height=312,s),n(1,i=new se(s,c,s.width,s.height,z));const a=new Set;for(let h of F.assets)n(1,i.assets[h.name]=new Image(h.width,h.height),i),n(1,i.assets[h.name].src=h.src,i),a.add(i.assets[h.name].src),n(1,i.assets[h.name].onloadend=u=>{a.delete(u.target.src)},i);let l=setInterval(()=>{a.size===0&&(i.start(),clearInterval(l))},250)});const r=c=>i.updateHz(parseInt(c.currentTarget.value));function o(c){x[c?"unshift":"push"](()=>{s=c,n(0,s)})}return[s,i,r,o]}class oe extends te{constructor(t){super(),ee(this,t,re,ie,q,{})}}new oe({target:document.getElementById("app")});
